{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///Users/ridmashehan/vinulab%20web/src/lib/consultations.ts"],"sourcesContent":["import path from \"path\";\nimport fs from \"fs\";\n\nexport interface ConsultationRequest {\n  id: string;\n  name: string;\n  email: string;\n  message: string;\n  timestamp: number;\n  gotIt: boolean;\n}\n\nconst getFilePath = () => path.join(process.cwd(), \"src\", \"data\", \"consultations.json\");\n\nexport function getConsultations(): ConsultationRequest[] {\n  try {\n    const raw = fs.readFileSync(getFilePath(), \"utf-8\");\n    return JSON.parse(raw);\n  } catch {\n    return [];\n  }\n}\n\nexport function addConsultation(data: Omit<ConsultationRequest, \"id\" | \"timestamp\" | \"gotIt\">): ConsultationRequest {\n  const list = getConsultations();\n  const record: ConsultationRequest = {\n    id: `${Date.now()}-${Math.random().toString(36).slice(2, 9)}`,\n    ...data,\n    timestamp: Date.now(),\n    gotIt: false,\n  };\n  list.unshift(record);\n  fs.writeFileSync(getFilePath(), JSON.stringify(list, null, 2), \"utf-8\");\n  return record;\n}\n\nexport function updateConsultationGotIt(id: string, gotIt: boolean): ConsultationRequest | null {\n  const list = getConsultations();\n  const idx = list.findIndex((r) => r.id === id);\n  if (idx === -1) return null;\n  list[idx] = { ...list[idx], gotIt };\n  fs.writeFileSync(getFilePath(), JSON.stringify(list, null, 2), \"utf-8\");\n  return list[idx];\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;;;AAWA,MAAM,cAAc,IAAM,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,OAAO,QAAQ;AAE3D,SAAS;IACd,IAAI;QACF,MAAM,MAAM,wGAAE,CAAC,YAAY,CAAC,eAAe;QAC3C,OAAO,KAAK,KAAK,CAAC;IACpB,EAAE,OAAM;QACN,OAAO,EAAE;IACX;AACF;AAEO,SAAS,gBAAgB,IAA6D;IAC3F,MAAM,OAAO;IACb,MAAM,SAA8B;QAClC,IAAI,GAAG,KAAK,GAAG,GAAG,CAAC,EAAE,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,KAAK,CAAC,GAAG,IAAI;QAC7D,GAAG,IAAI;QACP,WAAW,KAAK,GAAG;QACnB,OAAO;IACT;IACA,KAAK,OAAO,CAAC;IACb,wGAAE,CAAC,aAAa,CAAC,eAAe,KAAK,SAAS,CAAC,MAAM,MAAM,IAAI;IAC/D,OAAO;AACT;AAEO,SAAS,wBAAwB,EAAU,EAAE,KAAc;IAChE,MAAM,OAAO;IACb,MAAM,MAAM,KAAK,SAAS,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;IAC3C,IAAI,QAAQ,CAAC,GAAG,OAAO;IACvB,IAAI,CAAC,IAAI,GAAG;QAAE,GAAG,IAAI,CAAC,IAAI;QAAE;IAAM;IAClC,wGAAE,CAAC,aAAa,CAAC,eAAe,KAAK,SAAS,CAAC,MAAM,MAAM,IAAI;IAC/D,OAAO,IAAI,CAAC,IAAI;AAClB"}},
    {"offset": {"line": 106, "column": 0}, "map": {"version":3,"sources":["file:///Users/ridmashehan/vinulab%20web/src/app/api/consultations/%5Bid%5D/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\nimport { updateConsultationGotIt } from \"@/lib/consultations\";\n\nfunction isAdmin(request: NextRequest): boolean {\n  const password = request.headers.get(\"x-admin-password\");\n  const expected = process.env.ADMIN_PASSWORD || \"vinulab-admin\";\n  return password === expected;\n}\n\nexport async function PATCH(\n  request: NextRequest,\n  { params }: { params: Promise<{ id: string }> }\n) {\n  if (!isAdmin(request)) {\n    return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 });\n  }\n  try {\n    const { id } = await params;\n    const body = await request.json().catch(() => ({}));\n    const { gotIt } = body;\n    if (typeof gotIt !== \"boolean\") {\n      return NextResponse.json({ error: \"gotIt must be boolean\" }, { status: 400 });\n    }\n    const updated = updateConsultationGotIt(id, gotIt);\n    if (!updated) {\n      return NextResponse.json({ error: \"Not found\" }, { status: 404 });\n    }\n    return NextResponse.json(updated);\n  } catch (err) {\n    console.error(\"Consultation update error:\", err);\n    return NextResponse.json({ error: \"Update failed\" }, { status: 500 });\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEA,SAAS,QAAQ,OAAoB;IACnC,MAAM,WAAW,QAAQ,OAAO,CAAC,GAAG,CAAC;IACrC,MAAM,WAAW,QAAQ,GAAG,CAAC,cAAc,IAAI;IAC/C,OAAO,aAAa;AACtB;AAEO,eAAe,MACpB,OAAoB,EACpB,EAAE,MAAM,EAAuC;IAE/C,IAAI,CAAC,QAAQ,UAAU;QACrB,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAe,GAAG;YAAE,QAAQ;QAAI;IACpE;IACA,IAAI;QACF,MAAM,EAAE,EAAE,EAAE,GAAG,MAAM;QACrB,MAAM,OAAO,MAAM,QAAQ,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;QACjD,MAAM,EAAE,KAAK,EAAE,GAAG;QAClB,IAAI,OAAO,UAAU,WAAW;YAC9B,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAwB,GAAG;gBAAE,QAAQ;YAAI;QAC7E;QACA,MAAM,UAAU,IAAA,wJAAuB,EAAC,IAAI;QAC5C,IAAI,CAAC,SAAS;YACZ,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAY,GAAG;gBAAE,QAAQ;YAAI;QACjE;QACA,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAgB,GAAG;YAAE,QAAQ;QAAI;IACrE;AACF"}}]
}