{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///Users/ridmashehan/vinulab%20web/src/lib/consultations.ts"],"sourcesContent":["import path from \"path\";\nimport fs from \"fs\";\n\nexport interface ConsultationRequest {\n  id: string;\n  name: string;\n  email: string;\n  message: string;\n  timestamp: number;\n  gotIt: boolean;\n}\n\nconst getFilePath = () => path.join(process.cwd(), \"src\", \"data\", \"consultations.json\");\n\nexport function getConsultations(): ConsultationRequest[] {\n  try {\n    const raw = fs.readFileSync(getFilePath(), \"utf-8\");\n    return JSON.parse(raw);\n  } catch {\n    return [];\n  }\n}\n\nexport function addConsultation(data: Omit<ConsultationRequest, \"id\" | \"timestamp\" | \"gotIt\">): ConsultationRequest {\n  const list = getConsultations();\n  const record: ConsultationRequest = {\n    id: `${Date.now()}-${Math.random().toString(36).slice(2, 9)}`,\n    ...data,\n    timestamp: Date.now(),\n    gotIt: false,\n  };\n  list.unshift(record);\n  fs.writeFileSync(getFilePath(), JSON.stringify(list, null, 2), \"utf-8\");\n  return record;\n}\n\nexport function updateConsultationGotIt(id: string, gotIt: boolean): ConsultationRequest | null {\n  const list = getConsultations();\n  const idx = list.findIndex((r) => r.id === id);\n  if (idx === -1) return null;\n  list[idx] = { ...list[idx], gotIt };\n  fs.writeFileSync(getFilePath(), JSON.stringify(list, null, 2), \"utf-8\");\n  return list[idx];\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;;;AAWA,MAAM,cAAc,IAAM,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,OAAO,QAAQ;AAE3D,SAAS;IACd,IAAI;QACF,MAAM,MAAM,wGAAE,CAAC,YAAY,CAAC,eAAe;QAC3C,OAAO,KAAK,KAAK,CAAC;IACpB,EAAE,OAAM;QACN,OAAO,EAAE;IACX;AACF;AAEO,SAAS,gBAAgB,IAA6D;IAC3F,MAAM,OAAO;IACb,MAAM,SAA8B;QAClC,IAAI,GAAG,KAAK,GAAG,GAAG,CAAC,EAAE,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,KAAK,CAAC,GAAG,IAAI;QAC7D,GAAG,IAAI;QACP,WAAW,KAAK,GAAG;QACnB,OAAO;IACT;IACA,KAAK,OAAO,CAAC;IACb,wGAAE,CAAC,aAAa,CAAC,eAAe,KAAK,SAAS,CAAC,MAAM,MAAM,IAAI;IAC/D,OAAO;AACT;AAEO,SAAS,wBAAwB,EAAU,EAAE,KAAc;IAChE,MAAM,OAAO;IACb,MAAM,MAAM,KAAK,SAAS,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;IAC3C,IAAI,QAAQ,CAAC,GAAG,OAAO;IACvB,IAAI,CAAC,IAAI,GAAG;QAAE,GAAG,IAAI,CAAC,IAAI;QAAE;IAAM;IAClC,wGAAE,CAAC,aAAa,CAAC,eAAe,KAAK,SAAS,CAAC,MAAM,MAAM,IAAI;IAC/D,OAAO,IAAI,CAAC,IAAI;AAClB"}},
    {"offset": {"line": 106, "column": 0}, "map": {"version":3,"sources":["file:///Users/ridmashehan/vinulab%20web/src/app/api/consultations/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\nimport { addConsultation, getConsultations } from \"@/lib/consultations\";\n\nfunction isAdmin(request: NextRequest): boolean {\n  const password = request.headers.get(\"x-admin-password\");\n  const expected = process.env.ADMIN_PASSWORD || \"vinulab-admin\";\n  return password === expected;\n}\n\nexport async function POST(request: NextRequest) {\n  try {\n    const body = await request.json().catch(() => ({}));\n    const { name = \"\", email = \"\", message = \"\" } = body;\n    const record = addConsultation({\n      name: String(name).slice(0, 200),\n      email: String(email).slice(0, 256),\n      message: String(message).slice(0, 2000),\n    });\n    return NextResponse.json({ ok: true, id: record.id });\n  } catch (err) {\n    console.error(\"Consultation submit error:\", err);\n    return NextResponse.json({ error: \"Submit failed\" }, { status: 500 });\n  }\n}\n\nexport async function GET(request: NextRequest) {\n  if (!isAdmin(request)) {\n    return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 });\n  }\n  try {\n    const list = getConsultations();\n    return NextResponse.json(list);\n  } catch (err) {\n    console.error(\"Consultations fetch error:\", err);\n    return NextResponse.json({ error: \"Fetch failed\" }, { status: 500 });\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEA,SAAS,QAAQ,OAAoB;IACnC,MAAM,WAAW,QAAQ,OAAO,CAAC,GAAG,CAAC;IACrC,MAAM,WAAW,QAAQ,GAAG,CAAC,cAAc,IAAI;IAC/C,OAAO,aAAa;AACtB;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;QACjD,MAAM,EAAE,OAAO,EAAE,EAAE,QAAQ,EAAE,EAAE,UAAU,EAAE,EAAE,GAAG;QAChD,MAAM,SAAS,IAAA,gJAAe,EAAC;YAC7B,MAAM,OAAO,MAAM,KAAK,CAAC,GAAG;YAC5B,OAAO,OAAO,OAAO,KAAK,CAAC,GAAG;YAC9B,SAAS,OAAO,SAAS,KAAK,CAAC,GAAG;QACpC;QACA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,IAAI;YAAM,IAAI,OAAO,EAAE;QAAC;IACrD,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAgB,GAAG;YAAE,QAAQ;QAAI;IACrE;AACF;AAEO,eAAe,IAAI,OAAoB;IAC5C,IAAI,CAAC,QAAQ,UAAU;QACrB,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAe,GAAG;YAAE,QAAQ;QAAI;IACpE;IACA,IAAI;QACF,MAAM,OAAO,IAAA,iJAAgB;QAC7B,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAe,GAAG;YAAE,QAAQ;QAAI;IACpE;AACF"}}]
}